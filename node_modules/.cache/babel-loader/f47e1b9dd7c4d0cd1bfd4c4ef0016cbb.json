{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\HP\\\\Documents\\\\GIT\\\\Absence-Manager\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\HP\\\\Documents\\\\GIT\\\\Absence-Manager\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { DataGrid, GridToolbar } from '@material-ui/data-grid';\n\n//Columns to be displayed in the data table\nvar columns = [{\n  field: 'name',\n  headerName: 'Member Name',\n  width: 250\n}, {\n  field: 'type',\n  headerName: 'Type of Absence',\n  width: 200\n}, {\n  field: 'startDate',\n  headerName: 'Start Date',\n  width: 200\n}, {\n  field: 'endDate',\n  headerName: 'End Date',\n  width: 200\n}, {\n  field: 'status',\n  headerName: 'Status',\n  width: 200\n}, {\n  field: 'memberNote',\n  headerName: 'Member Note',\n  width: 400\n}, {\n  field: 'admitterNote',\n  headerName: 'Admitter Note',\n  width: 400\n}];\n\n//logic to display status\nvar getApprovalStatus = function getApprovalStatus(confirmedAt, rejectedAt) {\n  var status = \"Requested\";\n  if (confirmedAt) {\n    status = \"Confirmed\";\n  } else if (rejectedAt) {\n    status = \"Rejected\";\n  }\n  return status.toUpperCase();\n};\n\n//function to build the data table\nexport default function DynamicTable() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    totalAbsentes = _useState2[0],\n    setTotalAbsentes = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    data = _useState4[0],\n    setData = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1]; //load the data from json files and map the required fields.\n  useEffect(function () {\n    axios.get('absences.json').then(function (res) {\n      setLoading(true);\n      axios.get('members.json').then(function (res1) {\n        try {\n          //deriving the Member Name for each row based on the userId\n          res.data.payload.map(function (absence) {\n            var member = res1.data.payload.find(function (member) {\n              return member.userId === absence.userId;\n            });\n            absence.name = member.name;\n            //assigning the status using the function generateStatus based on confirmedAt and rejectedAt dates.\n            absence.status = getApprovalStatus(absence.confirmedAt, absence.rejectedAt);\n          });\n          //set the data into data variable.\n          setData(res.data.payload);\n          setLoading(false);\n          setTotalAbsentes(res.data.payload.length);\n        } catch (err) {\n          alert('Exception while constructing the data, due to ' + err);\n        }\n      }).catch(function (err) {\n        alert('Exception while fetching the members data, due to ' + err);\n      });\n    }).catch(function (err) {\n      alert('Exception while fetching the absences data, due to ' + err);\n    });\n  }, []);\n\n  //return the html for rendering datatable\n  return /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      align: 'center',\n      height: 650,\n      width: '95%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: \"blue\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 8\n    }\n  }, \"A \"), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: \"end\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 8\n    }\n  }, \"Total Absences : \", totalAbsentes), /*#__PURE__*/React.createElement(DataGrid, {\n    rows: data,\n    loading: loading,\n    columns: columns,\n    pageSize: 10,\n    components: {\n      Toolbar: GridToolbar\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 8\n    }\n  })));\n}","map":{"version":3,"names":["React","useState","useEffect","axios","DataGrid","GridToolbar","columns","field","headerName","width","getApprovalStatus","confirmedAt","rejectedAt","status","toUpperCase","DynamicTable","_useState","_useState2","_slicedToArray","totalAbsentes","setTotalAbsentes","_useState3","_useState4","data","setData","_useState5","_useState6","loading","setLoading","get","then","res","res1","payload","map","absence","member","find","userId","name","length","err","alert","catch","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","align","height","color","textAlign","rows","pageSize","components","Toolbar"],"sources":["C:/Users/HP/Documents/GIT/Absence-Manager/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from \"axios\";\r\nimport { DataGrid, GridToolbar } from '@material-ui/data-grid';\r\n\r\n\r\n//Columns to be displayed in the data table\r\nconst columns = [\r\n  { field: 'name', headerName: 'Member Name', width: 250 },\r\n  { field: 'type', headerName: 'Type of Absence', width: 200 },\r\n  { field: 'startDate', headerName: 'Start Date', width: 200 },\r\n  { field: 'endDate', headerName: 'End Date', width: 200 },\r\n  { field: 'status', headerName: 'Status', width: 200 },\r\n  { field: 'memberNote', headerName: 'Member Note', width: 400 },\r\n  { field: 'admitterNote', headerName: 'Admitter Note', width: 400 },\r\n];\r\n\r\n//logic to display status\r\nconst getApprovalStatus = (confirmedAt, rejectedAt) => {\r\n  let status = \"Requested\";\r\n  if (confirmedAt) {\r\n    status = \"Confirmed\";\r\n  } else if (rejectedAt) {\r\n    status = \"Rejected\";\r\n  }\r\n  return status.toUpperCase()\r\n};\r\n\r\n//function to build the data table\r\nexport default function DynamicTable() {\r\n const [totalAbsentes, setTotalAbsentes] = useState([]);\r\n const [data, setData] = useState([]);\r\n const [loading, setLoading] = useState(true);\r\n\r\n //load the data from json files and map the required fields.\r\n useEffect(() => {\r\n\r\n    axios.get('absences.json')\r\n        .then(res => {\r\n        setLoading(true);\r\n        axios.get('members.json')\r\n            .then(res1 => {\r\n                try {\r\n                        //deriving the Member Name for each row based on the userId\r\n                        res.data.payload.map(absence => {\r\n                        const member = res1.data.payload.find(member => member.userId === absence.userId);\r\n                        absence.name = member.name;\r\n                        //assigning the status using the function generateStatus based on confirmedAt and rejectedAt dates.\r\n                        absence.status = getApprovalStatus(absence.confirmedAt, absence.rejectedAt);\r\n                      });\r\n                      //set the data into data variable.\r\n                      setData(res.data.payload);\r\n                      setLoading(false);\r\n                      setTotalAbsentes(res.data.payload.length);\r\n                    } catch(err) {\r\n                      alert('Exception while constructing the data, due to '+err);\r\n                    }\r\n            })\r\n            .catch((err) => {\r\n                alert('Exception while fetching the members data, due to '+err);\r\n            })\r\n    })\r\n    .catch((err) => {\r\n        alert('Exception while fetching the absences data, due to '+err);\r\n    })\r\n }, [])\r\n\r\n //return the html for rendering datatable\r\n return (\r\n    <center>\r\n     <br/>\r\n     <div style={{  align: 'center', height: 650, width: '95%'}}>\r\n       <h1 style={{color:\"blue\"}}>A </h1> \r\n       <h2 style={{textAlign:\"end\"}}>Total Absences : {totalAbsentes}</h2>\r\n       <DataGrid rows={data}\r\n                 loading={loading}\r\n                 columns={columns}\r\n                 pageSize={10}\r\n                 components={{\r\n                   Toolbar: GridToolbar,\r\n                 }}\r\n       />\r\n     </div>\r\n     </center>\r\n   );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}